<!--
 * @LastEditors: Darth_Eternalfaith
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»„test</title>
</head>
<body>
    <canvas id="canvas" tabindex="0" width="800" height="800" style="position:absolute;left:0;top:0"></canvas>
    <script src="../../basics/basics.js"></script>
    <script src="../Math2d.js"></script>
    <script src="../visual.js"></script>
    <script src="../canvasTGT.js"></script>
    <script src="../Sprites.js"></script>

    <script type="text/javascript">
    var s=new Sprites(10,10,"./SpritesMap.png");
        var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");
        
        // var ctrlTGT=new CanvasPolygonTGT();
        //     ctrlTGT.data=new Polygon([
        //         {x:200,y:200},
        //         {x:60,y:200},
        //         {x:60,y:20},
        //         {x:200,y:20}
        //     ]);
        // ctrlTGT.want_to_closePath=true;

        var ctrlTGT=new CanvasRectTGT(0,0,150,150);
        // var ctrlTGT=new CanvasArcTGT(20,100,50,0,180*Math.DEG);
        

            var tgt1    =new CanvasArcTGT(110,110,50,45*Math.DEG,60*Math.DEG);
            var tgt2    =new CanvasArcTGT(110,220,50,45*Math.DEG,120*Math.DEG);
            var tgt3    =new CanvasArcTGT(110,330,50,45*Math.DEG,220*Math.DEG);
            var tgt4    =new CanvasArcTGT(110,440,50,45*Math.DEG,350*Math.DEG);
            var tgt5    =new CanvasArcTGT(220,110,50,135*Math.DEG,60*Math.DEG);
            var tgt6    =new CanvasArcTGT(220,220,50,135*Math.DEG,120*Math.DEG);
            var tgt7    =new CanvasArcTGT(220,330,50,135*Math.DEG,220*Math.DEG);
            var tgt8    =new CanvasArcTGT(220,440,50,135*Math.DEG,350*Math.DEG);
            var tgt9    =new CanvasArcTGT(330,110,50,225*Math.DEG,60*Math.DEG);
            var tgt10   =new CanvasArcTGT(330,220,50,225*Math.DEG,120*Math.DEG);
            var tgt11   =new CanvasArcTGT(330,330,50,225*Math.DEG,220*Math.DEG);
            var tgt12   =new CanvasArcTGT(330,440,50,225*Math.DEG,350*Math.DEG);
            var tgt13   =new CanvasArcTGT(440,110,50,315*Math.DEG,60*Math.DEG);
            var tgt14   =new CanvasArcTGT(440,220,50,315*Math.DEG,120*Math.DEG);
            var tgt15   =new CanvasArcTGT(440,330,50,315*Math.DEG,220*Math.DEG);
            var tgt16   =new CanvasArcTGT(440,440,50,315*Math.DEG,350*Math.DEG);

        tgt1.want_to_closePath=true;
        tgt1.fillStyle=
        tgt2.fillStyle=
        tgt3.fillStyle=
        tgt4.fillStyle=
        tgt5.fillStyle=
        tgt6.fillStyle=
        tgt7.fillStyle=
        tgt8.fillStyle=
        tgt9.fillStyle=
        tgt10.fillStyle=
        tgt11.fillStyle=
        tgt12.fillStyle=
        tgt13.fillStyle=
        tgt14.fillStyle=
        tgt15.fillStyle=
        tgt16.fillStyle="#00f";
        var static_TGTs=new CanvasTGT_Group();
        static_TGTs.addChildren(tgt1);
        static_TGTs.addChildren(tgt2);
        static_TGTs.addChildren(tgt3);
        static_TGTs.addChildren(tgt4);
        static_TGTs.addChildren(tgt5);
        static_TGTs.addChildren(tgt6);
        static_TGTs.addChildren(tgt7);
        static_TGTs.addChildren(tgt8);
        static_TGTs.addChildren(tgt9);
        static_TGTs.addChildren(tgt10);
        static_TGTs.addChildren(tgt11);
        static_TGTs.addChildren(tgt12);
        static_TGTs.addChildren(tgt13);
        static_TGTs.addChildren(tgt14);
        static_TGTs.addChildren(tgt15);
        static_TGTs.addChildren(tgt16);
        static_TGTs.render(ctx);
        tgt1.want_to_closePath=true;
        tgt1.want_to_closePath=true;
        tgt2.want_to_closePath=true;
        tgt3.want_to_closePath=true;
        tgt4.want_to_closePath=true;
        tgt5.want_to_closePath=true;
        tgt6.want_to_closePath=true;
        tgt7.want_to_closePath=true;
        tgt8.want_to_closePath=true;
        tgt9.want_to_closePath=true;
        tgt10.want_to_closePath=true;
        tgt11.want_to_closePath=true;
        tgt12.want_to_closePath=true;
        tgt13.want_to_closePath=true;
        tgt14.want_to_closePath=true;
        tgt15.want_to_closePath=true;
        tgt16.want_to_closePath=true;
        canvas.addEventListener("click",function(e){
            var x=e.clientX,y=e.clientY;
            var i=static_TGTs.inside_i(x,y);
            if(i!==-1){
                console.log("is click staticTGTs!",static_TGTs,i);
            }
        });
        var trect=new CanvasRectTGT();
        trect.fillStyle="#0000";
        for(var i = static_TGTs.children.length-1;i>=0;--i){
            trect.data.x=static_TGTs.children[i].data.min.x;
            trect.data.y=static_TGTs.children[i].data.min.y;
            trect.data.w=static_TGTs.children[i].data.max.x-static_TGTs.children[i].data.min.x;
            trect.data.h=static_TGTs.children[i].data.max.y-static_TGTs.children[i].data.min.y;
            trect.render(ctx);
            ctx.beginPath();
            ctx.arc(static_TGTs.children[i].data.max.x,static_TGTs.children[i].data.max.y,3,7,false);
            ctx.fillStyle="#f55";
            ctx.fill();
            ctx.beginPath();
            ctx.arc(static_TGTs.children[i].data.min.x,static_TGTs.children[i].data.min.y,3,7,false);
            ctx.fillStyle="#5f5";
            ctx.fill();
        }
        for(var i = static_TGTs.children.length-1;i>=0;--i){
            var opv=static_TGTs.children[i].data.opv;
            var edv=static_TGTs.children[i].data.edv;
            var c=static_TGTs.children[i].data.c;
            opv=c.add(opv);
            edv=c.add(edv);
            ctx.beginPath();
            ctx.arc(opv.x,opv.y,2,7,false);
            ctx.fillStyle="#888";
            ctx.fill();
            ctx.beginPath();
            ctx.arc(edv.x,edv.y,2,7,false);
            ctx.fillStyle="#000";
            ctx.fill();
            console.log(static_TGTs.children[i].data.edv.x,static_TGTs.children[i].data.edv.y);
        }
    </script>
</body>
</html>